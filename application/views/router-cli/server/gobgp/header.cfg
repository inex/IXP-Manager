{*
    GoBGP Route Server Configuration Templates

    Please see: https://github.com/inex/IXP-Manager/wiki/Route-Server

    You should not need to edit these files - instead use your own custom skins. If
    you can not effect the changes you need with skinning, consider posting to the mailing
    list to see if it can be achieved / incorporated.

    Skinning: https://github.com/inex/IXP-Manager/wiki/Skinning

    GoBGP configuration template from Shu Sugimoto <shu@su.gimo.to> @JPNAP/INTERNET MULTIFEED CO.
*}

# GoBGP Route Server configuration generated by IXP Manager
#
# Do not edit this file, it will be overwritten. Please see:
#
# https://github.com/inex/IXP-Manager/wiki/Route-Server
#
# Generated: {$smarty.now|date_format:'Y-m-d H:i:s'}
#

# For VLAN: {$vlan->getName()} (Tag: {$vlan->getNumber()}, Database ID: {$vlan->getId()})

[global.config]
  as = {#rsconfASN#}
  router-id = "{#rsconfRouterID#}"
  local-address-list = ["{#rsconfListenAddr#}"]

[[defined-sets.prefix-sets]]
  prefix-set-name = "martians"
{if $proto eq 4}
  [[defined-sets.prefix-sets.prefix-list]]
    ip-prefix = "10.0.0.0/8"
    masklength-range = "8..32"
  [[defined-sets.prefix-sets.prefix-list]]
    ip-prefix = "169.254.0.0/16"
    masklength-range = "16..32"
  [[defined-sets.prefix-sets.prefix-list]]
    ip-prefix = "172.16.0.0/12"
    masklength-range = "12..32"
  [[defined-sets.prefix-sets.prefix-list]]
    ip-prefix = "192.0.0.0/24"
    masklength-range = "24..32"
  [[defined-sets.prefix-sets.prefix-list]]
    ip-prefix = "192.0.2.0/24"
    masklength-range = "24..32"
  [[defined-sets.prefix-sets.prefix-list]]
    ip-prefix = "192.168.0.0/16"
    masklength-range = "16..32"
  [[defined-sets.prefix-sets.prefix-list]]
    ip-prefix = "198.18.0.0/15"
    masklength-range = "15..32"
  [[defined-sets.prefix-sets.prefix-list]]
    ip-prefix = "198.51.100.0/24"
    masklength-range = "24..32"
  [[defined-sets.prefix-sets.prefix-list]]
    ip-prefix = "203.0.113.0/24"
    masklength-range = "24..32"
  [[defined-sets.prefix-sets.prefix-list]]
    ip-prefix = "224.0.0.0/4"
    masklength-range = "4..32"
  [[defined-sets.prefix-sets.prefix-list]]
    ip-prefix = "240.0.0.0/4"
    masklength-range = "4..32"
  [[defined-sets.prefix-sets.prefix-list]]
    ip-prefix = "0.0.0.0/0"
    masklength-range = "0..7"
  [[defined-sets.prefix-sets.prefix-list]]
    ip-prefix = "0.0.0.0/0"
    masklength-range = "25..32"
{else}
  [[defined-sets.prefix-sets.prefix-list]]
    ip-prefix = "::/0"
  [[defined-sets.prefix-sets.prefix-list]]
    ip-prefix = "::/96"
  [[defined-sets.prefix-sets.prefix-list]]
    ip-prefix = "::/128"
  [[defined-sets.prefix-sets.prefix-list]]
    ip-prefix = "::1/128"
  [[defined-sets.prefix-sets.prefix-list]]
    ip-prefix = "::ffff:0.0.0.0/96"
    masklength-range = "96..128"
  [[defined-sets.prefix-sets.prefix-list]]
    ip-prefix = "::224.0.0.0/100"
    masklength-range = "100..128"
  [[defined-sets.prefix-sets.prefix-list]]
    ip-prefix = "::127.0.0.0/104"
    masklength-range = "104..128"
  [[defined-sets.prefix-sets.prefix-list]]
    ip-prefix = "::0.0.0.0/104"
    masklength-range = "104..128"
  [[defined-sets.prefix-sets.prefix-list]]
    ip-prefix = "::255.0.0.0/104"
    masklength-range = "104..128"
  [[defined-sets.prefix-sets.prefix-list]]
    ip-prefix = "0000::/8"
    masklength-range = "8..128"
  [[defined-sets.prefix-sets.prefix-list]]
    ip-prefix = "0200::/7"
    masklength-range = "7..128"
  [[defined-sets.prefix-sets.prefix-list]]
    ip-prefix = "3ffe::/16"
    masklength-range = "16..128"
  [[defined-sets.prefix-sets.prefix-list]]
    ip-prefix = "2001:db8::/32"
    masklength-range = "32..128"
  [[defined-sets.prefix-sets.prefix-list]]
    ip-prefix = "2002:e000::/20"
    masklength-range = "20..128"
  [[defined-sets.prefix-sets.prefix-list]]
    ip-prefix = "2002:7f00::/24"
    masklength-range = "24..128"
  [[defined-sets.prefix-sets.prefix-list]]
    ip-prefix = "2002:0000::/24"
    masklength-range = "24..128"
  [[defined-sets.prefix-sets.prefix-list]]
    ip-prefix = "2002:ff00::/24"
    masklength-range = "24..128"
  [[defined-sets.prefix-sets.prefix-list]]
    ip-prefix = "2002:0a00::/24"
    masklength-range = "24..128"
  [[defined-sets.prefix-sets.prefix-list]]
    ip-prefix = "2002:ac10::/28"
    masklength-range = "28..128"
  [[defined-sets.prefix-sets.prefix-list]]
    ip-prefix = "2002:c0a8::/32"
    masklength-range = "32..128"
  [[defined-sets.prefix-sets.prefix-list]]
    ip-prefix = "fc00::/7"
    masklength-range = "7..128"
  [[defined-sets.prefix-sets.prefix-list]]
    ip-prefix = "fe80::/10"
    masklength-range = "10..128"
  [[defined-sets.prefix-sets.prefix-list]]
    ip-prefix = "fec0::/10"
    masklength-range = "10..128"
  [[defined-sets.prefix-sets.prefix-list]]
    ip-prefix = "ff00::/8"
    masklength-range = "8..128"
{/if}

[[policy-definitions]]
  name = "f_martians"
  [[policy-definitions.statements]]
    [policy-definitions.statements.conditions.match-prefix-set]
      prefix-set = "martians"
    [policy-definitions.statements.actions.route-disposition]
      accept-route = false

[[policy-definitions]]
  name = "f_accept"
  [[policy-definitions.statements]]
    [policy-definitions.statements.actions.route-disposition]
      accept-route = true

[[defined-sets.bgp-defined-sets.community-sets]]
  community-set-name = "do_not_advertise_to_all"
  community-list = ["0:{#rsconfASN#}"]
