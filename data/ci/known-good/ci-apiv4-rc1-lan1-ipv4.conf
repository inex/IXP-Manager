#
# Bird Route Collector configuration generated by IXP Manager
#
# Do not edit this file, it will be overwritten.
#
# Generated: 2025-08-30 12:05:52
#

# For VLAN: Peering LAN 1 (Tag: 1, Database ID: 1)

# standardise time formats:
timeformat base         iso long;
timeformat log          iso long;
timeformat protocol     iso long;
timeformat route        iso long;


log "/var/log/bird/rc1-lan1-ipv4.log" all;
log syslog all;

define routerasn     = 65500;
define routeraddress = 192.0.2.8;

router id 192.0.2.8;
listen bgp address routeraddress;

# ignore interface up/down events
protocol device { }

# These function excludes weird networks
#  rfc1918, class D, class E, too long and too short prefixes


function avoid_martians_v4()
prefix set martiansv4;
{
        # This list of martians is obtained from the IANA IPv4
        # Special-Purpose Address Registry:
        # http://www.iana.org/assignments/iana-ipv4-special-registry
        martiansv4 = [
                10.0.0.0/8+,            # RFC1918 - Private use
                100.64.0.0/10+,         # RFC6598 - Shared address space
                127.0.0.0/8+,           # RFC1122 - Loopback
                169.254.0.0/16+,        # RFC3927 - Link-local
                172.16.0.0/12+,         # RFC1918 - Private use
                192.0.0.0/24+,          # multiple RFCs
                192.0.2.0/24+,          # RFC5737 - Documentation - TEST-NET-1
                192.168.0.0/16+,        # RFC1918 - Private use
                198.18.0.0/15+,         # RFC2544 - Benchmarking
                198.51.100.0/24+,       # RFC5737 - Documentation - TEST-NET-2
                203.0.113.0/24+,        # RFC5737 - Documentation - TEST-NET-3
                224.0.0.0/4+,           # RFC3171 - Multicast
                240.0.0.0/4+,           # RFC1112 - Reserved
                0.0.0.0/32-,
                0.0.0.0/0{25,32},
                0.0.0.0/0{0,7}
        ];

        # Avoid RFC1918 and similar networks
        if net ~ martiansv4 then
                return false;

        return true;
}

filter f_import_policy_v4
{
        if !(avoid_martians_v4()) then
                reject;

        accept;
}


##
## Route collector client configuration
##


protocol bgp pb_as42_vli3_ipv4 {
        description "AS42 - PCH DNS";
        local as routerasn;
        source address routeraddress;
        neighbor 10.1.0.36 as 42;
        # As a route collector, we want to import everything and export nothing:
        import all;
        export none;
        import limit 2000 action restart;
        password "mcWsqMdzGwTKt67g";
}


protocol bgp pb_as112_vli4_ipv4 {
        description "AS112 - AS112";
        local as routerasn;
        source address routeraddress;
        neighbor 10.1.0.6 as 112;
        # As a route collector, we want to import everything and export nothing:
        import all;
        export none;
        import limit 20 action restart;
        password "w83fmGpRDtaKomQo";
}


protocol bgp pb_as1213_vli1_ipv4 {
        description "AS1213 - HEAnet";
        local as routerasn;
        source address routeraddress;
        neighbor 10.1.0.10 as 1213;
        # As a route collector, we want to import everything and export nothing:
        import all;
        export none;
        import limit 1000 action restart;
        password "N7rX2SdfbRsyBLTm";
}


protocol bgp pb_as65501_vli9_ipv4 {
        description "AS65501 - SCIX Route Servers";
        local as routerasn;
        source address routeraddress;
        neighbor 10.1.0.8 as 65501;
        # As a route collector, we want to import everything and export nothing:
        import all;
        export none;
        import limit 100000 action restart;
        password "6cXTNAMkbI56";
}


